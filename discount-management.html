<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EventHub - Discount Management</title>

    <!-- Bootstrap 5.3 CSS (Latest) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Bootstrap Icons (Latest) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            line-height: 1.6;
        }

        /* EventHub Admin Navbar Styles */
        .eventhub-navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .eventhub-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: #1f2937;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .eventhub-brand:hover {
            color: #6366f1;
        }

        .brand-icon {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 0.5rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .brand-text {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .admin-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 0.5rem;
            animation: pulse 2s infinite;
        }

        .eventhub-nav-link {
            color: #6b7280;
            font-weight: 500;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            text-decoration: none;
            margin: 0 0.25rem;
        }

        .eventhub-nav-link:hover {
            color: #6366f1;
            background: rgba(99, 102, 241, 0.1);
        }

        .eventhub-nav-link.active {
            color: #6366f1;
            background: rgba(99, 102, 241, 0.15);
            font-weight: 600;
        }

        .custom-toggler {
            border: none;
            padding: 0.5rem;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 8px;
        }

        .custom-toggler:focus {
            box-shadow: 0 0 0 0.2rem rgba(99, 102, 241, 0.25);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #374151;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .user-menu:hover {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
        }

        .user-avatar {
            color: #6366f1;
            font-size: 1.5rem;
        }

        .user-name {
            font-weight: 600;
        }

        .user-dropdown {
            border: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 0.5rem;
            margin-top: 0.5rem;
        }

        .user-dropdown .dropdown-item {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            color: #374151;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .user-dropdown .dropdown-item:hover {
            background-color: rgba(99, 102, 241, 0.1);
            color: #6366f1;
        }

        .user-dropdown .dropdown-item.active {
            background-color: rgba(99, 102, 241, 0.15);
            color: #6366f1;
        }

        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 3rem 0 2rem;
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M 100 0 L 0 0 0 100" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="2"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
            z-index: 1;
        }

        .page-header-content {
            position: relative;
            z-index: 2;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin: 0;
        }

        .header-stats {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 120px;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: white;
            display: block;
        }

        .stat-label {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 0.25rem;
        }

        /* Main Content */
        .main-content {
            padding: 2rem 0;
        }

        /* Tab Navigation */
        .custom-tabs {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .nav-tabs {
            border: none;
            background: #f8fafc;
        }

        .nav-tabs .nav-link {
            border: none;
            background: transparent;
            color: #6b7280;
            font-weight: 600;
            padding: 1rem 1.5rem;
            transition: all 0.3s ease;
        }

        .nav-tabs .nav-link:hover {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
        }

        .nav-tabs .nav-link.active {
            background: white;
            color: #6366f1;
            border-bottom: 3px solid #6366f1;
        }

        /* Content Cards */
        .content-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .card-header-custom {
            background: #f8fafc;
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .card-subtitle {
            color: #6b7280;
            margin: 0;
            font-size: 0.9rem;
        }

        .card-body-custom {
            padding: 1.5rem;
        }

        /* Forms */
        .form-section {
            margin-bottom: 2rem;
        }

        .form-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-label.required::after {
            content: ' *';
            color: #ef4444;
        }

        .form-control, .form-select {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 0.75rem 1rem;
            transition: all 0.2s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 0.2rem rgba(99, 102, 241, 0.1);
        }

        .input-group-text {
            background: #f8fafc;
            border: 2px solid #e5e7eb;
            color: #6b7280;
            font-weight: 500;
        }

        /* Buttons */
        .btn-primary-custom {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .btn-primary-custom:hover {
            background: linear-gradient(135deg, #5855eb 0%, #7c3aed 100%);
            color: white;
            transform: translateY(-1px);
        }

        .btn-outline-custom {
            border: 2px solid #e5e7eb;
            color: #6b7280;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            background: white;
            transition: all 0.3s ease;
        }

        .btn-outline-custom:hover {
            border-color: #6366f1;
            color: #6366f1;
            background: rgba(99, 102, 241, 0.05);
        }

        .btn-success-custom {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .btn-success-custom:hover {
            background: linear-gradient(135deg, #0d9488 0%, #047857 100%);
            color: white;
            transform: translateY(-1px);
        }

        .btn-danger-custom {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .btn-danger-custom:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            transform: translateY(-1px);
        }

        /* Tables */
        .table-custom {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .table-custom thead {
            background: #f8fafc;
        }

        .table-custom th {
            border: none;
            color: #374151;
            font-weight: 600;
            padding: 1rem;
        }

        .table-custom td {
            border: none;
            padding: 1rem;
            vertical-align: middle;
        }

        .table-custom tbody tr {
            border-bottom: 1px solid #f3f4f6;
        }

        .table-custom tbody tr:hover {
            background: #f8fafc;
        }

        /* Status Badges */
        .status-badge {
            padding: 0.375rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-badge.active {
            background: #dcfce7;
            color: #166534;
        }

        .status-badge.inactive {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-badge.expired {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.used {
            background: #e0e7ff;
            color: #3730a3;
        }

        /* Discount Cards */
        .discount-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            border-left: 4px solid #6366f1;
        }

        .discount-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .discount-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .discount-code {
            font-family: 'Courier New', monospace;
            background: #f3f4f6;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 700;
            color: #374151;
            border: 2px dashed #d1d5db;
        }

        .discount-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #10b981;
        }

        .discount-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6b7280;
            font-size: 0.9rem;
        }

        .detail-item i {
            color: #6366f1;
        }

        .discount-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        /* Charts */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 1rem 0;
        }

        .chart-container.large {
            height: 400px;
        }

        /* Statistics Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 4px solid;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-card.discounts {
            border-left-color: #6366f1;
        }

        .stat-card.loyalty {
            border-left-color: #f59e0b;
        }

        .stat-card.usage {
            border-left-color: #10b981;
        }

        .stat-card.savings {
            border-left-color: #ef4444;
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.discounts {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }

        .stat-icon.loyalty {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .stat-icon.usage {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .stat-icon.savings {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .stat-content h3 {
            font-size: 2rem;
            font-weight: 700;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .stat-content p {
            color: #6b7280;
            margin-bottom: 0;
            font-weight: 500;
        }

        .stat-change {
            font-size: 0.8rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
        }

        .stat-change.positive {
            background: #dcfce7;
            color: #166534;
        }

        .stat-change.negative {
            background: #fee2e2;
            color: #991b1b;
        }

        .stat-change.neutral {
            background: #f3f4f6;
            color: #6b7280;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .page-title {
                font-size: 2rem;
            }

            .header-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .discount-header {
                flex-direction: column;
                gap: 1rem;
            }

            .discount-details {
                grid-template-columns: 1fr;
            }

            .discount-actions {
                justify-content: center;
            }

            .navbar-collapse {
                margin-top: 1rem;
                padding: 1rem;
                background-color: white;
                border-radius: 12px;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                border: 1px solid #e2e8f0;
            }

            .eventhub-nav-link {
                padding: 0.75rem 1rem !important;
                margin: 0.25rem 0;
            }

            .user-menu {
                width: 100%;
                justify-content: center;
                margin-top: 1rem;
                border-top: 1px solid #e2e8f0;
                padding-top: 1rem !important;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>
    <!-- EventHub Admin Header -->
    <nav class="navbar navbar-expand-lg eventhub-navbar">
        <div class="container-fluid px-4">
            <!-- Brand Logo -->
            <a class="navbar-brand eventhub-brand d-flex align-items-center" href="index.html">
                <div class="brand-icon me-2">
                    <i class="bi bi-calendar-event me-1"></i>
                </div>
                <span class="brand-text">EventHub</span>
                <span class="admin-badge">Admin</span>
            </a>

            <!-- Mobile Toggle Button -->
            <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navigation Items -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <!-- Left Navigation -->
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link eventhub-nav-link" href="admin-dashboard.html">
                            <i class="bi bi-speedometer2 me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link eventhub-nav-link" href="user-management.html">
                            <i class="bi bi-people me-1"></i>Users
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link eventhub-nav-link" href="event-management.html">
                            <i class="bi bi-calendar3 me-1"></i>Events
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link eventhub-nav-link" href="venue-management.html">
                            <i class="bi bi-building me-1"></i>Venues
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link eventhub-nav-link" href="system-reports.html">
                            <i class="bi bi-graph-up me-1"></i>Reports
                        </a>
                    </li>
                </ul>

                <!-- Right Navigation - User Menu -->
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle user-menu" href="#" id="userDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <div class="user-avatar">
                                <i class="bi bi-person-circle"></i>
                            </div>
                            <span class="user-name" id="userName">Admin User</span>
                        </a>
                        <ul class="dropdown-menu user-dropdown" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="admin-dashboard.html">
                                    <i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
                            <li><a class="dropdown-item" href="admin-settings.html">
                                    <i class="bi bi-gear me-2"></i>Settings</a></li>
                            <li><a class="dropdown-item" href="user-profile.html">
                                    <i class="bi bi-person me-2"></i>Profile</a></li>
                            <li><a class="dropdown-item" href="financial-reports.html">
                                    <i class="bi bi-cash-stack me-2"></i>Financial Reports</a></li>
                            <li><a class="dropdown-item active" href="discount-management.html">
                                    <i class="bi bi-percent me-2"></i>Discounts</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#" onclick="logout()">
                                    <i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="page-header-content">
                <div class="header-info">
                    <div>
                        <h1 class="page-title">Discount Management</h1>
                        <p class="page-subtitle">Create and manage promotional discounts, loyalty programs, and campaigns</p>
                    </div>
                    <div class="header-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="totalDiscounts">47</span>
                            <span class="stat-label">Active Discounts</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="totalSavings">Rs. 2.4M</span>
                            <span class="stat-label">Total Savings</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="loyaltyMembers">1,256</span>
                            <span class="stat-label">Loyalty Members</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="main-content">
        <div class="container">
            <!-- Statistics Overview -->
            <div class="stats-grid">
                <div class="stat-card discounts">
                    <div class="stat-header">
                        <div class="stat-content">
                            <h3 id="activeDiscountCount">47</h3>
                            <p>Active Discount Codes</p>
                        </div>
                        <div class="stat-icon discounts">
                            <i class="bi bi-percent"></i>
                        </div>
                    </div>
                    <div class="stat-change positive">+5 this week</div>
                </div>

                <div class="stat-card loyalty">
                    <div class="stat-header">
                        <div class="stat-content">
                            <h3 id="loyaltyPointsIssued">45.2K</h3>
                            <p>Points Issued This Month</p>
                        </div>
                        <div class="stat-icon loyalty">
                            <i class="bi bi-star-fill"></i>
                        </div>
                    </div>
                    <div class="stat-change positive">+12% increase</div>
                </div>

                <div class="stat-card usage">
                    <div class="stat-header">
                        <div class="stat-content">
                            <h3 id="discountUsage">78%</h3>
                            <p>Average Usage Rate</p>
                        </div>
                        <div class="stat-icon usage">
                            <i class="bi bi-graph-up"></i>
                        </div>
                    </div>
                    <div class="stat-change positive">+8% from last month</div>
                </div>

                <div class="stat-card savings">
                    <div class="stat-header">
                        <div class="stat-content">
                            <h3 id="customerSavings">Rs. 2.4M</h3>
                            <p>Customer Savings</p>
                        </div>
                        <div class="stat-icon savings">
                            <i class="bi bi-currency-dollar"></i>
                        </div>
                    </div>
                    <div class="stat-change positive">+15% this quarter</div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="custom-tabs">
                <ul class="nav nav-tabs" id="discountTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="discount-codes-tab" data-bs-toggle="tab" 
                                data-bs-target="#discount-codes" type="button" role="tab">
                            <i class="bi bi-percent me-2"></i>Discount Codes
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="loyalty-program-tab" data-bs-toggle="tab" 
                                data-bs-target="#loyalty-program" type="button" role="tab">
                            <i class="bi bi-star me-2"></i>Loyalty Program
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="campaigns-tab" data-bs-toggle="tab" 
                                data-bs-target="#campaigns" type="button" role="tab">
                            <i class="bi bi-megaphone me-2"></i>Campaigns
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="analytics-tab" data-bs-toggle="tab" 
                                data-bs-target="#analytics" type="button" role="tab">
                            <i class="bi bi-bar-chart me-2"></i>Analytics
                        </button>
                    </li>
                </ul>

                <div class="tab-content" id="discountTabContent">
                    <!-- Discount Codes Tab -->
                    <div class="tab-pane fade show active" id="discount-codes" role="tabpanel">
                        <div class="card-body-custom">
                            <!-- Create New Discount -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Create New Discount Code</h5>
                                    <p class="card-subtitle">Set up promotional discount codes for events and customers</p>
                                </div>
                                <div class="card-body-custom">
                                    <form id="discountForm">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="discountCode" class="form-label required">Discount Code</label>
                                                <input type="text" class="form-control" id="discountCode" 
                                                       placeholder="e.g., SUMMER2025" maxlength="20">
                                                <div class="form-text">Use uppercase letters and numbers only</div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="discountType" class="form-label required">Discount Type</label>
                                                <select class="form-select" id="discountType" onchange="toggleDiscountValue()">
                                                    <option value="">Select discount type</option>
                                                    <option value="percentage">Percentage Discount</option>
                                                    <option value="fixed">Fixed Amount</option>
                                                    <option value="buy_one_get_one">Buy One Get One</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row g-3 mt-2">
                                            <div class="col-md-6">
                                                <label for="discountValue" class="form-label required">Discount Value</label>
                                                <div class="input-group">
                                                    <span class="input-group-text" id="discountSymbol">%</span>
                                                    <input type="number" class="form-control" id="discountValue" 
                                                           placeholder="Enter value" min="1" max="100">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="usageLimit" class="form-label">Usage Limit</label>
                                                <input type="number" class="form-control" id="usageLimit" 
                                                       placeholder="Leave empty for unlimited" min="1">
                                            </div>
                                        </div>

                                        <div class="row g-3 mt-2">
                                            <div class="col-md-6">
                                                <label for="startDate" class="form-label required">Start Date</label>
                                                <input type="datetime-local" class="form-control" id="startDate">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="endDate" class="form-label required">End Date</label>
                                                <input type="datetime-local" class="form-control" id="endDate">
                                            </div>
                                        </div>

                                        <div class="row g-3 mt-2">
                                            <div class="col-md-6">
                                                <label for="minPurchase" class="form-label">Minimum Purchase Amount</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" class="form-control" id="minPurchase" 
                                                           placeholder="0" min="0">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="applicableEvents" class="form-label">Applicable Events</label>
                                                <select class="form-select" id="applicableEvents">
                                                    <option value="all">All Events</option>
                                                    <option value="specific">Specific Events</option>
                                                    <option value="category">Event Categories</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-section mt-3">
                                            <label for="description" class="form-label">Description</label>
                                            <textarea class="form-control" id="description" rows="3" 
                                                      placeholder="Optional description for internal use"></textarea>
                                        </div>

                                        <div class="form-section mt-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="isActive" checked>
                                                <label class="form-check-label" for="isActive">
                                                    Activate discount code immediately
                                                </label>
                                            </div>
                                        </div>

                                        <div class="mt-4">
                                            <button type="submit" class="btn btn-primary-custom">
                                                <i class="bi bi-plus-circle me-2"></i>Create Discount Code
                                            </button>
                                            <button type="reset" class="btn btn-outline-custom ms-2">
                                                <i class="bi bi-arrow-clockwise me-2"></i>Reset Form
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Active Discount Codes -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h5 class="card-title">Active Discount Codes</h5>
                                            <p class="card-subtitle">Manage existing promotional codes</p>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-outline-custom" onclick="exportDiscounts()">
                                                <i class="bi bi-download me-2"></i>Export
                                            </button>
                                            <div class="input-group" style="width: 250px;">
                                                <span class="input-group-text"><i class="bi bi-search"></i></span>
                                                <input type="text" class="form-control" placeholder="Search codes..." 
                                                       id="searchDiscounts" onkeyup="filterDiscounts()">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body-custom">
                                    <div id="discountsList">
                                        <!-- Discount codes will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loyalty Program Tab -->
                    <div class="tab-pane fade" id="loyalty-program" role="tabpanel">
                        <div class="card-body-custom">
                            <!-- Loyalty Settings -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Loyalty Program Settings</h5>
                                    <p class="card-subtitle">Configure point earning rates and redemption rules</p>
                                </div>
                                <div class="card-body-custom">
                                    <form id="loyaltySettingsForm">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label for="pointsPerRupee" class="form-label">Points per Rupee Spent</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="pointsPerRupee" 
                                                           value="1" min="0.1" step="0.1">
                                                    <span class="input-group-text">points</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="redemptionRate" class="form-label">Redemption Rate</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="redemptionRate" 
                                                           value="100" min="1">
                                                    <span class="input-group-text">points = Rs. 1</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row g-3 mt-2">
                                            <div class="col-md-6">
                                                <label for="minRedemption" class="form-label">Minimum Redemption Points</label>
                                                <input type="number" class="form-control" id="minRedemption" 
                                                       value="500" min="1">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="maxRedemption" class="form-label">Maximum Redemption per Order</label>
                                                <div class="input-group">
                                                    <input type="number" class="form-control" id="maxRedemption" 
                                                           value="5000" min="1">
                                                    <span class="input-group-text">points</span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row g-3 mt-2">
                                            <div class="col-md-6">
                                                <label for="pointExpiry" class="form-label">Point Expiry Period</label>
                                                <select class="form-select" id="pointExpiry">
                                                    <option value="never">Never Expire</option>
                                                    <option value="6">6 Months</option>
                                                    <option value="12" selected>12 Months</option>
                                                    <option value="24">24 Months</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="bonusEvents" class="form-label">Bonus Point Events</label>
                                                <select class="form-select" id="bonusEvents">
                                                    <option value="none">No Bonus</option>
                                                    <option value="first_purchase">First Purchase</option>
                                                    <option value="birthday">Birthday Month</option>
                                                    <option value="special_events">Special Events</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="mt-4">
                                            <button type="submit" class="btn btn-success-custom">
                                                <i class="bi bi-check-circle me-2"></i>Update Loyalty Settings
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Loyalty Tiers -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Loyalty Tiers</h5>
                                    <p class="card-subtitle">Create membership tiers with special benefits</p>
                                </div>
                                <div class="card-body-custom">
                                    <div class="row g-3">
                                        <div class="col-md-4">
                                            <div class="tier-card bronze">
                                                <div class="tier-header">
                                                    <h6>Bronze Member</h6>
                                                    <div class="tier-icon">
                                                        <i class="bi bi-award"></i>
                                                    </div>
                                                </div>
                                                <div class="tier-requirements">
                                                    <p>Requirements: 0+ points</p>
                                                </div>
                                                <div class="tier-benefits">
                                                    <ul>
                                                        <li>1x points on purchases</li>
                                                        <li>Basic customer support</li>
                                                        <li>Event notifications</li>
                                                    </ul>
                                                </div>
                                                <div class="tier-members">
                                                    <small>856 members</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="tier-card silver">
                                                <div class="tier-header">
                                                    <h6>Silver Member</h6>
                                                    <div class="tier-icon">
                                                        <i class="bi bi-award-fill"></i>
                                                    </div>
                                                </div>
                                                <div class="tier-requirements">
                                                    <p>Requirements: 5,000+ points</p>
                                                </div>
                                                <div class="tier-benefits">
                                                    <ul>
                                                        <li>1.5x points on purchases</li>
                                                        <li>Priority customer support</li>
                                                        <li>Early event access</li>
                                                        <li>5% exclusive discounts</li>
                                                    </ul>
                                                </div>
                                                <div class="tier-members">
                                                    <small>324 members</small>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="tier-card gold">
                                                <div class="tier-header">
                                                    <h6>Gold Member</h6>
                                                    <div class="tier-icon">
                                                        <i class="bi bi-gem"></i>
                                                    </div>
                                                </div>
                                                <div class="tier-requirements">
                                                    <p>Requirements: 15,000+ points</p>
                                                </div>
                                                <div class="tier-benefits">
                                                    <ul>
                                                        <li>2x points on purchases</li>
                                                        <li>VIP customer support</li>
                                                        <li>Exclusive events access</li>
                                                        <li>10% exclusive discounts</li>
                                                        <li>Free event upgrades</li>
                                                    </ul>
                                                </div>
                                                <div class="tier-members">
                                                    <small>76 members</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Recent Loyalty Activity -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Recent Loyalty Activity</h5>
                                    <p class="card-subtitle">Latest point earnings and redemptions</p>
                                </div>
                                <div class="card-body-custom">
                                    <div class="table-responsive">
                                        <table class="table table-custom">
                                            <thead>
                                                <tr>
                                                    <th>Customer</th>
                                                    <th>Activity</th>
                                                    <th>Points</th>
                                                    <th>Date</th>
                                                    <th>Tier</th>
                                                </tr>
                                            </thead>
                                            <tbody id="loyaltyActivityTable">
                                                <!-- Activity rows will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Campaigns Tab -->
                    <div class="tab-pane fade" id="campaigns" role="tabpanel">
                        <div class="card-body-custom">
                            <!-- Create Campaign -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Create Marketing Campaign</h5>
                                    <p class="card-subtitle">Launch targeted promotional campaigns</p>
                                </div>
                                <div class="card-body-custom">
                                    <form id="campaignForm">
                                        <div class="row g-3">
                                            <div class="col-md-8">
                                                <label for="campaignName" class="form-label required">Campaign Name</label>
                                                <input type="text" class="form-control" id="campaignName" 
                                                       placeholder="e.g., Summer Festival Promotion">
                                            </div>
                                            <div class="col-md-4">
                                                <label for="campaignType" class="form-label required">Campaign Type</label>
                                                <select class="form-select" id="campaignType">
                                                    <option value="">Select type</option>
                                                    <option value="seasonal">Seasonal Promotion</option>
                                                    <option value="flash">Flash Sale</option>
                                                    <option value="loyalty">Loyalty Bonus</option>
                                                    <option value="referral">Referral Program</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="row g-3 mt-2">
                                            <div class="col-md-6">
                                                <label for="targetAudience" class="form-label">Target Audience</label>
                                                <select class="form-select" id="targetAudience">
                                                    <option value="all">All Customers</option>
                                                    <option value="new">New Customers</option>
                                                    <option value="returning">Returning Customers</option>
                                                    <option value="loyalty_bronze">Bronze Members</option>
                                                    <option value="loyalty_silver">Silver Members</option>
                                                    <option value="loyalty_gold">Gold Members</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="campaignBudget" class="form-label">Campaign Budget</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">Rs.</span>
                                                    <input type="number" class="form-control" id="campaignBudget" 
                                                           placeholder="Optional budget limit">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-section mt-3">
                                            <label for="campaignDescription" class="form-label required">Campaign Description</label>
                                            <textarea class="form-control" id="campaignDescription" rows="4" 
                                                      placeholder="Describe your campaign goals and messaging"></textarea>
                                        </div>

                                        <div class="mt-4">
                                            <button type="submit" class="btn btn-primary-custom">
                                                <i class="bi bi-rocket-takeoff me-2"></i>Launch Campaign
                                            </button>
                                            <button type="button" class="btn btn-outline-custom ms-2" onclick="saveDraft()">
                                                <i class="bi bi-save me-2"></i>Save as Draft
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Active Campaigns -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Active Campaigns</h5>
                                    <p class="card-subtitle">Monitor ongoing promotional campaigns</p>
                                </div>
                                <div class="card-body-custom">
                                    <div id="campaignsList">
                                        <!-- Campaigns will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Tab -->
                    <div class="tab-pane fade" id="analytics" role="tabpanel">
                        <div class="card-body-custom">
                            <!-- Performance Overview -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Discount Performance Analytics</h5>
                                    <p class="card-subtitle">Track the effectiveness of your promotional campaigns</p>
                                </div>
                                <div class="card-body-custom">
                                    <div class="row g-4">
                                        <div class="col-lg-8">
                                            <div class="chart-container large">
                                                <canvas id="discountUsageChart"></canvas>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="chart-container">
                                                <canvas id="discountTypeChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Detailed Analytics -->
                            <div class="content-card">
                                <div class="card-header-custom">
                                    <h5 class="card-title">Top Performing Discounts</h5>
                                    <p class="card-subtitle">Most effective discount codes by usage and revenue impact</p>
                                </div>
                                <div class="card-body-custom">
                                    <div class="table-responsive">
                                        <table class="table table-custom">
                                            <thead>
                                                <tr>
                                                    <th>Discount Code</th>
                                                    <th>Type</th>
                                                    <th>Usage Count</th>
                                                    <th>Revenue Impact</th>
                                                    <th>Success Rate</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody id="topDiscountsTable">
                                                <!-- Top discounts will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsNkTpxq"
        crossorigin="anonymous"></script>

    <script>
        // Sample data for demonstration
        const sampleDiscounts = [
            {
                id: 1,
                code: 'SUMMER2025',
                type: 'percentage',
                value: 20,
                description: 'Summer festival discount',
                usageLimit: 500,
                usageCount: 347,
                minPurchase: 1000,
                startDate: '2025-06-01',
                endDate: '2025-08-31',
                status: 'active',
                revenue: 125000
            },
            {
                id: 2,
                code: 'NEWUSER50',
                type: 'fixed',
                value: 500,
                description: 'New user welcome discount',
                usageLimit: 1000,
                usageCount: 789,
                minPurchase: 2000,
                startDate: '2025-01-01',
                endDate: '2025-12-31',
                status: 'active',
                revenue: 89000
            },
            {
                id: 3,
                code: 'LOYALTY15',
                type: 'percentage',
                value: 15,
                description: 'Loyalty member exclusive',
                usageLimit: null,
                usageCount: 234,
                minPurchase: 0,
                startDate: '2025-03-01',
                endDate: '2025-12-31',
                status: 'active',
                revenue: 67000
            }
        ];

        const sampleLoyaltyActivity = [
            {
                customer: 'Priya Fernando',
                activity: 'Points Earned',
                points: '+125',
                date: '2025-09-20',
                tier: 'Silver'
            },
            {
                customer: 'Rajesh Silva',
                activity: 'Points Redeemed',
                points: '-500',
                date: '2025-09-20',
                tier: 'Gold'
            },
            {
                customer: 'Samantha Perera',
                activity: 'Tier Upgrade',
                points: '+1000',
                date: '2025-09-19',
                tier: 'Gold'
            }
        ];

        const sampleCampaigns = [
            {
                id: 1,
                name: 'Flash Weekend Sale',
                type: 'flash',
                status: 'active',
                audience: 'all',
                startDate: '2025-09-20',
                endDate: '2025-09-22',
                performance: {
                    reach: 15000,
                    conversions: 450,
                    revenue: 235000
                }
            },
            {
                id: 2,
                name: 'Loyalty Member Appreciation',
                type: 'loyalty',
                status: 'active',
                audience: 'loyalty_gold',
                startDate: '2025-09-15',
                endDate: '2025-09-30',
                performance: {
                    reach: 76,
                    conversions: 32,
                    revenue: 45000
                }
            }
        ];

        let discountUsageChart, discountTypeChart;

        // Page initialization
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            loadDiscounts();
            loadLoyaltyActivity();
            loadCampaigns();
            loadTopDiscounts();
            setupEventListeners();
        });

        function initializePage() {
            // Set current date/time for form fields
            const now = new Date();
            const today = now.toISOString().slice(0, 16);
            
            document.getElementById('startDate').value = today;
            
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 30);
            document.getElementById('endDate').value = tomorrow.toISOString().slice(0, 16);

            // Initialize charts
            initializeCharts();
        }

        function initializeCharts() {
            // Discount Usage Chart
            const usageCtx = document.getElementById('discountUsageChart').getContext('2d');
            discountUsageChart = new Chart(usageCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'],
                    datasets: [{
                        label: 'Discount Usage',
                        data: [120, 190, 300, 250, 420, 380, 450, 520, 600],
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Revenue Impact',
                        data: [80, 140, 220, 180, 300, 280, 350, 420, 480],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });

            // Discount Type Chart
            const typeCtx = document.getElementById('discountTypeChart').getContext('2d');
            discountTypeChart = new Chart(typeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Percentage', 'Fixed Amount', 'BOGO'],
                    datasets: [{
                        data: [65, 25, 10],
                        backgroundColor: [
                            '#6366f1',
                            '#10b981',
                            '#f59e0b'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }

        function setupEventListeners() {
            // Form submissions
            document.getElementById('discountForm').addEventListener('submit', handleDiscountSubmit);
            document.getElementById('loyaltySettingsForm').addEventListener('submit', handleLoyaltySettingsSubmit);
            document.getElementById('campaignForm').addEventListener('submit', handleCampaignSubmit);

            // Mobile menu auto-close
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
            const navbarCollapse = document.querySelector('.navbar-collapse');

            navLinks.forEach(link => {
                link.addEventListener('click', function () {
                    if (window.innerWidth < 992) {
                        const bsCollapse = bootstrap.Collapse.getInstance(navbarCollapse) ||
                            new bootstrap.Collapse(navbarCollapse);
                        bsCollapse.hide();
                    }
                });
            });
        }

        function toggleDiscountValue() {
            const type = document.getElementById('discountType').value;
            const symbol = document.getElementById('discountSymbol');
            const valueInput = document.getElementById('discountValue');

            if (type === 'percentage') {
                symbol.textContent = '%';
                valueInput.max = 100;
                valueInput.placeholder = 'Enter percentage (1-100)';
            } else if (type === 'fixed') {
                symbol.textContent = 'Rs.';
                valueInput.max = 50000;
                valueInput.placeholder = 'Enter amount';
            } else if (type === 'buy_one_get_one') {
                symbol.textContent = 'Free';
                valueInput.max = 10;
                valueInput.placeholder = 'Free items count';
            }
        }

        function loadDiscounts() {
            const container = document.getElementById('discountsList');
            container.innerHTML = '';

            sampleDiscounts.forEach((discount, index) => {
                const discountCard = createDiscountCard(discount, index);
                container.appendChild(discountCard);
            });
        }

        function createDiscountCard(discount, index) {
            const card = document.createElement('div');
            card.className = 'discount-card fade-in';
            card.style.animationDelay = `${index * 0.1}s`;

            const usagePercentage = discount.usageLimit ? 
                Math.round((discount.usageCount / discount.usageLimit) * 100) : 0;

            card.innerHTML = `
                <div class="discount-header">
                    <div>
                        <div class="discount-code">${discount.code}</div>
                        <div class="discount-value">
                            ${discount.type === 'percentage' ? discount.value + '%' : 
                              discount.type === 'fixed' ? 'Rs. ' + discount.value : 'BOGO'} OFF
                        </div>
                    </div>
                    <div class="status-badge ${discount.status}">${discount.status.toUpperCase()}</div>
                </div>
                <div class="discount-details">
                    <div class="detail-item">
                        <i class="bi bi-calendar3"></i>
                        <span>Valid: ${formatDate(discount.startDate)} - ${formatDate(discount.endDate)}</span>
                    </div>
                    <div class="detail-item">
                        <i class="bi bi-people"></i>
                        <span>Used: ${discount.usageCount}${discount.usageLimit ? `/${discount.usageLimit}` : ''}</span>
                    </div>
                    <div class="detail-item">
                        <i class="bi bi-currency-dollar"></i>
                        <span>Revenue Impact: Rs. ${discount.revenue.toLocaleString()}</span>
                    </div>
                    <div class="detail-item">
                        <i class="bi bi-cart"></i>
                        <span>Min. Purchase: Rs. ${discount.minPurchase}</span>
                    </div>
                </div>
                ${discount.usageLimit ? `
                    <div class="progress mt-2 mb-3" style="height: 8px;">
                        <div class="progress-bar" role="progressbar" style="width: ${usagePercentage}%; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);" 
                             aria-valuenow="${usagePercentage}" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                ` : ''}
                <div class="discount-actions">
                    <button class="btn btn-outline-custom btn-sm" onclick="editDiscount(${discount.id})">
                        <i class="bi bi-pencil me-1"></i>Edit
                    </button>
                    <button class="btn btn-outline-custom btn-sm" onclick="cloneDiscount(${discount.id})">
                        <i class="bi bi-files me-1"></i>Clone
                    </button>
                    <button class="btn btn-outline-custom btn-sm" onclick="viewAnalytics(${discount.id})">
                        <i class="bi bi-bar-chart me-1"></i>Analytics
                    </button>
                    <button class="btn ${discount.status === 'active' ? 'btn-danger-custom' : 'btn-success-custom'} btn-sm" 
                            onclick="toggleDiscountStatus(${discount.id})">
                        <i class="bi bi-${discount.status === 'active' ? 'pause' : 'play'} me-1"></i>
                        ${discount.status === 'active' ? 'Deactivate' : 'Activate'}
                    </button>
                </div>
            `;

            return card;
        }

        function loadLoyaltyActivity() {
            const tbody = document.getElementById('loyaltyActivityTable');
            tbody.innerHTML = '';

            sampleLoyaltyActivity.forEach(activity => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="user-avatar me-2" style="width: 32px; height: 32px; background: #6366f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem;">
                                ${activity.customer.split(' ').map(n => n[0]).join('')}
                            </div>
                            ${activity.customer}
                        </div>
                    </td>
                    <td>${activity.activity}</td>
                    <td>
                        <span class="${activity.points.startsWith('+') ? 'text-success' : 'text-danger'} fw-bold">
                            ${activity.points}
                        </span>
                    </td>
                    <td>${formatDate(activity.date)}</td>
                    <td><span class="status-badge ${activity.tier.toLowerCase()}">${activity.tier}</span></td>
                `;
                tbody.appendChild(row);
            });
        }

        function loadCampaigns() {
            const container = document.getElementById('campaignsList');
            container.innerHTML = '';

            sampleCampaigns.forEach((campaign, index) => {
                const campaignCard = createCampaignCard(campaign, index);
                container.appendChild(campaignCard);
            });
        }

        function createCampaignCard(campaign, index) {
            const card = document.createElement('div');
            card.className = 'content-card fade-in';
            card.style.animationDelay = `${index * 0.1}s`;

            const conversionRate = Math.round((campaign.performance.conversions / campaign.performance.reach) * 100);

            card.innerHTML = `
                <div class="card-header-custom">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="card-title">${campaign.name}</h6>
                            <p class="card-subtitle">${campaign.type.replace('_', ' ').toUpperCase()} Campaign</p>
                        </div>
                        <span class="status-badge ${campaign.status}">${campaign.status.toUpperCase()}</span>
                    </div>
                </div>
                <div class="card-body-custom">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-primary">${campaign.performance.reach.toLocaleString()}</h4>
                                <small class="text-muted">Reach</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-success">${campaign.performance.conversions}</h4>
                                <small class="text-muted">Conversions</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-warning">${conversionRate}%</h4>
                                <small class="text-muted">Conversion Rate</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <h4 class="text-info">Rs. ${campaign.performance.revenue.toLocaleString()}</h4>
                                <small class="text-muted">Revenue</small>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 text-center">
                        <button class="btn btn-outline-custom btn-sm me-2" onclick="editCampaign(${campaign.id})">
                            <i class="bi bi-pencil me-1"></i>Edit
                        </button>
                        <button class="btn btn-outline-custom btn-sm me-2" onclick="viewCampaignDetails(${campaign.id})">
                            <i class="bi bi-eye me-1"></i>View Details
                        </button>
                        <button class="btn btn-danger-custom btn-sm" onclick="stopCampaign(${campaign.id})">
                            <i class="bi bi-stop me-1"></i>Stop Campaign
                        </button>
                    </div>
                </div>
            `;

            return card;
        }

        function loadTopDiscounts() {
            const tbody = document.getElementById('topDiscountsTable');
            tbody.innerHTML = '';

            const sortedDiscounts = [...sampleDiscounts].sort((a, b) => b.usageCount - a.usageCount);

            sortedDiscounts.forEach(discount => {
                const successRate = discount.usageLimit ? 
                    Math.round((discount.usageCount / discount.usageLimit) * 100) : 100;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${discount.code}</strong></td>
                    <td><span class="badge bg-secondary">${discount.type.toUpperCase()}</span></td>
                    <td>${discount.usageCount}${discount.usageLimit ? `/${discount.usageLimit}` : ''}</td>
                    <td>Rs. ${discount.revenue.toLocaleString()}</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <span class="me-2">${successRate}%</span>
                            <div class="progress flex-fill" style="height: 6px; width: 60px;">
                                <div class="progress-bar bg-success" style="width: ${successRate}%"></div>
                            </div>
                        </div>
                    </td>
                    <td><span class="status-badge ${discount.status}">${discount.status.toUpperCase()}</span></td>
                `;
                tbody.appendChild(row);
            });
        }

        // Event Handlers
        function handleDiscountSubmit(e) {
            e.preventDefault();
            
            const formData = {
                code: document.getElementById('discountCode').value,
                type: document.getElementById('discountType').value,
                value: document.getElementById('discountValue').value,
                usageLimit: document.getElementById('usageLimit').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                minPurchase: document.getElementById('minPurchase').value,
                applicableEvents: document.getElementById('applicableEvents').value,
                description: document.getElementById('description').value,
                isActive: document.getElementById('isActive').checked
            };

            // Validation
            if (!formData.code || !formData.type || !formData.value || !formData.startDate || !formData.endDate) {
                Swal.fire({
                    title: 'Missing Information',
                    text: 'Please fill in all required fields.',
                    icon: 'warning',
                    confirmButtonColor: '#6366f1'
                });
                return;
            }

            // Create discount
            Swal.fire({
                title: 'Creating Discount Code...',
                text: 'Please wait while we create your discount code.',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            setTimeout(() => {
                Swal.fire({
                    title: 'Discount Created!',
                    text: `Discount code "${formData.code}" has been created successfully.`,
                    icon: 'success',
                    confirmButtonColor: '#6366f1'
                }).then(() => {
                    document.getElementById('discountForm').reset();
                    toggleDiscountValue(); // Reset the discount value field
                    loadDiscounts(); // Refresh the list
                });
            }, 2000);
        }

        function handleLoyaltySettingsSubmit(e) {
            e.preventDefault();
            
            Swal.fire({
                title: 'Settings Updated!',
                text: 'Loyalty program settings have been updated successfully.',
                icon: 'success',
                confirmButtonColor: '#6366f1'
            });
        }

        function handleCampaignSubmit(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('campaignName').value,
                type: document.getElementById('campaignType').value,
                audience: document.getElementById('targetAudience').value,
                budget: document.getElementById('campaignBudget').value,
                description: document.getElementById('campaignDescription').value
            };

            if (!formData.name || !formData.type || !formData.description) {
                Swal.fire({
                    title: 'Missing Information',
                    text: 'Please fill in all required fields.',
                    icon: 'warning',
                    confirmButtonColor: '#6366f1'
                });
                return;
            }

            Swal.fire({
                title: 'Campaign Launched!',
                text: `Campaign "${formData.name}" has been launched successfully.`,
                icon: 'success',
                confirmButtonColor: '#6366f1'
            }).then(() => {
                document.getElementById('campaignForm').reset();
                loadCampaigns();
            });
        }

        // Utility Functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }

        function filterDiscounts() {
            const searchTerm = document.getElementById('searchDiscounts').value.toLowerCase();
            const discountCards = document.querySelectorAll('.discount-card');

            discountCards.forEach(card => {
                const code = card.querySelector('.discount-code').textContent.toLowerCase();
                if (code.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function exportDiscounts() {
            Swal.fire({
                title: 'Export Discounts',
                text: 'Choose export format:',
                showCancelButton: true,
                confirmButtonText: 'Excel (.xlsx)',
                cancelButtonText: 'CSV (.csv)',
                confirmButtonColor: '#6366f1',
                cancelButtonColor: '#10b981'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Export as Excel
                    Swal.fire('Exported!', 'Discount data exported as Excel file.', 'success');
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    // Export as CSV
                    Swal.fire('Exported!', 'Discount data exported as CSV file.', 'success');
                }
            });
        }

        function editDiscount(id) {
            Swal.fire({
                title: 'Edit Discount',
                text: `Edit discount with ID: ${id}`,
                icon: 'info',
                confirmButtonColor: '#6366f1'
            });
        }

        function cloneDiscount(id) {
            Swal.fire({
                title: 'Clone Discount',
                text: 'This will create a copy of the discount code with a new code.',
                showCancelButton: true,
                confirmButtonColor: '#6366f1',
                confirmButtonText: 'Yes, Clone It'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Cloned!', 'Discount code has been cloned successfully.', 'success');
                }
            });
        }

        function viewAnalytics(id) {
            Swal.fire({
                title: 'Discount Analytics',
                html: `
                    <div class="text-start">
                        <h6>Performance Metrics</h6>
                        <ul>
                            <li>Total Usage: 347 times</li>
                            <li>Revenue Impact: Rs. 125,000</li>
                            <li>Average Order Value: Rs. 3,200</li>
                            <li>Customer Acquisition: 89 new customers</li>
                        </ul>
                    </div>
                `,
                confirmButtonColor: '#6366f1'
            });
        }

        function toggleDiscountStatus(id) {
            const discount = sampleDiscounts.find(d => d.id === id);
            const action = discount.status === 'active' ? 'deactivate' : 'activate';
            
            Swal.fire({
                title: `${action.charAt(0).toUpperCase() + action.slice(1)} Discount`,
                text: `Are you sure you want to ${action} this discount code?`,
                showCancelButton: true,
                confirmButtonColor: action === 'activate' ? '#10b981' : '#ef4444',
                confirmButtonText: `Yes, ${action.charAt(0).toUpperCase() + action.slice(1)}`
            }).then((result) => {
                if (result.isConfirmed) {
                    discount.status = discount.status === 'active' ? 'inactive' : 'active';
                    loadDiscounts();
                    Swal.fire(`${action.charAt(0).toUpperCase() + action.slice(1)}d!`, 
                              `Discount code has been ${action}d.`, 'success');
                }
            });
        }

        function saveDraft() {
            Swal.fire({
                title: 'Draft Saved!',
                text: 'Campaign has been saved as draft.',
                icon: 'success',
                confirmButtonColor: '#6366f1'
            });
        }

        function editCampaign(id) {
            Swal.fire({
                title: 'Edit Campaign',
                text: `Edit campaign with ID: ${id}`,
                icon: 'info',
                confirmButtonColor: '#6366f1'
            });
        }

        function viewCampaignDetails(id) {
            const campaign = sampleCampaigns.find(c => c.id === id);
            
            Swal.fire({
                title: campaign.name,
                html: `
                    <div class="text-start">
                        <h6>Campaign Performance</h6>
                        <ul>
                            <li>Reach: ${campaign.performance.reach.toLocaleString()} people</li>
                            <li>Conversions: ${campaign.performance.conversions}</li>
                            <li>Revenue: Rs. ${campaign.performance.revenue.toLocaleString()}</li>
                            <li>Conversion Rate: ${Math.round((campaign.performance.conversions / campaign.performance.reach) * 100)}%</li>
                        </ul>
                    </div>
                `,
                confirmButtonColor: '#6366f1'
            });
        }

        function stopCampaign(id) {
            Swal.fire({
                title: 'Stop Campaign',
                text: 'Are you sure you want to stop this campaign? This action cannot be undone.',
                showCancelButton: true,
                confirmButtonColor: '#ef4444',
                confirmButtonText: 'Yes, Stop Campaign'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Stopped!', 'Campaign has been stopped successfully.', 'success');
                }
            });
        }

        function logout() {
            Swal.fire({
                title: 'Confirm Logout',
                text: 'Are you sure you want to log out?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#6366f1',
                cancelButtonColor: '#6b7280',
                confirmButtonText: 'Yes, Logout',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'Logged Out!',
                        text: 'You have been successfully logged out',
                        icon: 'success',
                        confirmButtonColor: '#6366f1',
                        timer: 2000,
                        timerProgressBar: true
                    }).then(() => {
                        window.location.href = 'login.html';
                    });
                }
            });
        }

        // Add tier card styles
        const tierStyles = `
            <style>
                .tier-card {
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
                    border: 2px solid #e5e7eb;
                    transition: all 0.3s ease;
                    height: 100%;
                }

                .tier-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
                }

                .tier-card.bronze {
                    border-color: #d97706;
                }

                .tier-card.silver {
                    border-color: #6b7280;
                }

                .tier-card.gold {
                    border-color: #f59e0b;
                }

                .tier-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 1rem;
                }

                .tier-header h6 {
                    font-weight: 600;
                    color: #374151;
                    margin: 0;
                }

                .tier-icon {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 1.2rem;
                }

                .tier-card.bronze .tier-icon {
                    background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
                }

                .tier-card.silver .tier-icon {
                    background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
                }

                .tier-card.gold .tier-icon {
                    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
                }

                .tier-requirements {
                    background: #f8fafc;
                    padding: 0.75rem;
                    border-radius: 8px;
                    margin-bottom: 1rem;
                }

                .tier-requirements p {
                    margin: 0;
                    font-size: 0.9rem;
                    color: #6b7280;
                    font-weight: 500;
                }

                .tier-benefits ul {
                    list-style: none;
                    padding: 0;
                    margin: 0;
                }

                .tier-benefits li {
                    padding: 0.25rem 0;
                    color: #374151;
                    font-size: 0.9rem;
                    position: relative;
                    padding-left: 1.5rem;
                }

                .tier-benefits li::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    color: #10b981;
                    font-weight: bold;
                }

                .tier-members {
                    text-align: center;
                    margin-top: 1rem;
                    padding-top: 1rem;
                    border-top: 1px solid #f3f4f6;
                }

                .tier-members small {
                    color: #6b7280;
                    font-weight: 500;
                }
            </style>
        `;

        // Add styles to head
        document.head.insertAdjacentHTML('beforeend', tierStyles);
    </script>
</body>
</html>